{{!-- Inline confirm dialog - Alpine.js modal confirmation
     Include once per page. Trigger via:
       $dispatch('confirm-delete', { title: '...', message: '...', action: '/ui/entities/slug/id/delete' })
--}}
<div x-data="{
    open: false,
    title: '',
    message: '',
    action: '',
    confirmLabel: 'Delete',
    show(title, message, action) {
        this.title = title;
        this.message = message;
        this.action = action;
        this.open = true;
        this.$nextTick(() => this.$refs.cancelBtn.focus());
    },
    confirm() {
        if (this.action) {
            const form = document.createElement('form');
            form.method = 'POST';
            form.action = this.action;
            document.body.appendChild(form);
            form.submit();
        }
        this.open = false;
    },
    cancel() {
        this.open = false;
    }
}"
     x-cloak
     @confirm-delete.window="show($event.detail.title, $event.detail.message, $event.detail.action)"
     @keydown.escape.window="open && cancel()"
     @keydown.enter.window="open && confirm()"
>
    {{!-- Backdrop --}}
    <div x-show="open"
         x-transition.opacity
         @click.self="cancel()"
         style="position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 200;"
    >
        {{!-- Dialog --}}
        <div x-show="open"
             x-transition
             role="dialog"
             aria-modal="true"
             style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 201;"
        >
            {{!-- Card --}}
            <div style="background: var(--card-bg, white); border-radius: 0.5rem; padding: 1.5rem; max-width: 28rem; width: 90%; box-shadow: 0 20px 60px rgba(0,0,0,0.3);">
                <h3 x-text="title"
                    style="font-size: 1.125rem; font-weight: 600; margin-bottom: 0.5rem; color: var(--text-primary);">
                </h3>
                <p x-text="message"
                   style="color: var(--text-secondary); margin-bottom: 1.5rem; font-size: 0.875rem;">
                </p>
                {{!-- Buttons --}}
                <div style="display: flex; gap: 0.75rem; justify-content: flex-end;">
                    <button class="btn btn-secondary"
                            x-ref="cancelBtn"
                            @click="cancel()">
                        Cancel
                    </button>
                    <button class="btn btn-danger"
                            @click="confirm()"
                            x-text="confirmLabel">
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
