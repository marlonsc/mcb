<th
  x-data="{
    get sortUrl() {
      const params = new URLSearchParams(window.location.search);
      const currentSort = params.get('sort');
      const currentOrder = params.get('order');
      if (currentSort === '{{name}}') {
        if (currentOrder === 'asc') {
          params.set('sort', '{{name}}');
          params.set('order', 'desc');
        } else if (currentOrder === 'desc') {
          params.delete('sort');
          params.delete('order');
        } else {
          params.set('sort', '{{name}}');
          params.set('order', 'asc');
        }
      } else {
        params.set('sort', '{{name}}');
        params.set('order', 'asc');
      }
      params.set('page', '1');
      return window.location.pathname + '?' + params.toString();
    },
    get sortIndicator() {
      const params = new URLSearchParams(window.location.search);
      if (params.get('sort') === '{{name}}') {
        return params.get('order') === 'desc' ? '\u25BC' : '\u25B2';
      }
      return '';
    },
    get isActive() {
      return new URLSearchParams(window.location.search).get('sort') === '{{name}}';
    }
  }"
  :style="isActive ? 'cursor: pointer; user-select: none; white-space: nowrap; text-align: left; font-size: 0.75rem; font-weight: 500; color: var(--accent); text-transform: uppercase; letter-spacing: 0.04em; padding: 0.75rem 1rem; border-bottom: 1px solid var(--border-color);' : 'cursor: pointer; user-select: none; white-space: nowrap; text-align: left; font-size: 0.75rem; font-weight: 500; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.04em; padding: 0.75rem 1rem; border-bottom: 1px solid var(--border-color);'"
  @mouseenter="$el.style.color = isActive ? 'var(--accent)' : 'var(--text-primary)'"
  @mouseleave="$el.style.color = isActive ? 'var(--accent)' : 'var(--text-secondary)'"
>
  <a
    :href="sortUrl"
    style="text-decoration: none; color: inherit; display: flex; align-items: center; gap: 0.25rem;"
  >
    <span>{{label}}</span>
    <span
      x-show="isActive"
      x-text="sortIndicator"
      style="margin-left: 0.25rem; font-size: 0.625rem;"
    ></span>
    <span
      x-show="!isActive"
      x-cloak
      style="margin-left: 0.25rem; font-size: 0.625rem; opacity: 0;"
      :style="$el.closest('th').matches(':hover') ? 'margin-left: 0.25rem; font-size: 0.625rem; opacity: 0.4;' : 'margin-left: 0.25rem; font-size: 0.625rem; opacity: 0;'"
    >&#8645;</span>
  </a>
</th>
