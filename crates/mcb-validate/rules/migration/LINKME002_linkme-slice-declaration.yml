schema: "rule/v1"
id: "LINKME002"
name: "Linkme Slice Declaration"
category: "dependency_injection"
severity: "warning"
enabled: true
engine: "rust-rule-engine"

description: "Provider registry missing #[linkme::distributed_slice] declaration"
rationale: "All provider registries must use linkme distributed slices"

rule: |
  rule LinkmeSliceDeclaration "Check for linkme slice declaration" {
      when
          ProviderRegistry() &&
          !HasAttribute("linkme::distributed_slice")
      then
          Violation("Provider registry missing #[linkme::distributed_slice] declaration");
  }