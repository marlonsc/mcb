schema: "rule/v1"
id: "SHAKU002"
name: "Interface Annotation Required"
category: "dependency_injection"
severity: "error"
enabled: true
engine: "rust-rule-engine"

description: "Shaku component missing #[shaku(interface = ...)]"
rationale: "Interface annotation connects component to its port trait"

rule: |
  rule InterfaceAnnotationRequired "Check for shaku interface annotation" {
      when
          HasAttribute("derive(Component)") &&
          !HasAttribute("shaku(interface")
      then
          Violation("Shaku component missing #[shaku(interface = ...)]");
  }