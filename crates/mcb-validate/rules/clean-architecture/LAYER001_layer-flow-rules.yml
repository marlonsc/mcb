schema: "rule/v1"
id: "LAYER001"
name: "Layer Flow Rules"
category: "architecture"
severity: "error"
enabled: true
engine: "rust-rule-engine"

description: "Clean Architecture layer dependency rules"
rationale: "Enforces unidirectional dependency flow from high-level to low-level layers"

config:
  layers:
    - "{{domain_crate}}"
    - "{{application_crate}}"
    - "{{providers_crate}}"
    - "{{infrastructure_crate}}"
    - "{{server_crate}}"
  forbidden_dependencies:
    "{{domain_crate}}":
      - "{{application_crate}}"
      - "{{providers_crate}}"
      - "{{infrastructure_crate}}"
      - "{{server_crate}}"
    "{{application_crate}}":
      - "{{providers_crate}}"
      - "{{infrastructure_crate}}"
      - "{{server_crate}}"
    "{{providers_crate}}":
      - "{{infrastructure_crate}}"
      - "{{server_crate}}"
    "{{infrastructure_crate}}":
      - "{{server_crate}}"
    "{{server_crate}}":
      - "{{providers_crate}}"

rule: |
  rule LayerFlow "Layer Flow Rules" {
      when
          True
      then
          // Provides configuration for LayerFlowValidator
  }
