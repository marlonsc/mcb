{% import "icons.html" as icons %}
{% if config_diff.has_changes %}
<div class="alert alert-warning">
    <div class="flex items-center gap-2 mb-3">
        {{ icons::icon(name="warning", class="icon text-warning") }}
        <span class="text-sm font-medium">Unsaved Configuration Changes</span>
    </div>
    {% if config_diff.runtime_only|length > 0 %}
    <div class="mb-4">
        <h4 class="text-sm font-medium mb-2">Changes in Runtime (not saved):</h4>
        {% for key, value in config_diff.runtime_only %}
        <div class="flex items-center text-sm">
            <span class="diff-added mr-2">+</span>
            <code class="code">{{ key }}</code>
            <span class="mx-2 text-muted">=</span>
            <span class="text-secondary">{{ value }}</span>
        </div>
        {% endfor %}
    </div>
    {% endif %}
    {% if config_diff.file_only|length > 0 %}
    <div class="mb-4">
        <h4 class="text-sm font-medium mb-2">Changes in File (not loaded):</h4>
        {% for key, value in config_diff.file_only %}
        <div class="flex items-center text-sm">
            <span class="diff-removed mr-2">-</span>
            <code class="code">{{ key }}</code>
            <span class="mx-2 text-muted">=</span>
            <span class="text-secondary">{{ value }}</span>
        </div>
        {% endfor %}
    </div>
    {% endif %}
    <div class="flex gap-3 mt-4">
        <button hx-post="/admin/configuration/save" hx-swap="none" hx-confirm="Save configuration to file?" class="btn btn-primary btn-sm">Save to File</button>
        <button hx-post="/admin/routes/reload" hx-swap="none" hx-confirm="Reload from file?" class="btn btn-secondary btn-sm">Reload from File</button>
    </div>
</div>
{% else %}
<div class="alert alert-success">
    <div class="flex items-center gap-2">
        {{ icons::icon(name="check-circle", class="icon text-success") }}
        <span class="text-sm font-medium">Configuration is synchronized</span>
    </div>
    <p class="mt-1 text-sm text-secondary">Runtime configuration matches the file on disk.</p>
</div>
{% endif %}
